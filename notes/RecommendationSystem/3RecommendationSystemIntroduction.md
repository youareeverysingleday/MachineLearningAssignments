# 推荐系统

1. 参考书：《推荐系统实践》，作者：项亮

## 分类

1. 按应用场景分类
   1. 个性化推荐
   2. 相关推荐
   3. 热门推荐
2. 按使用技术分类
   1. 基于item的推荐
   2. 基于user的推荐（也就是基于用户好友关系的推荐）
   3. 基于协同过滤的推荐

## 1. 好的推荐系统

1. 推荐系统和搜索引擎是互补的关系。使用搜索引擎时，用户在知道准确的关键词。在用户无法提供关键词时，推荐系统通过通过分析用户的历史行为给用户的兴趣建模来满足用户的兴趣需求。
2. 推荐系统不需要用户提供明确的需求，而是通过分析用户的历史行为给用户的兴趣建模，从而主动给用户推荐能够满足他们兴趣和需求的信息。
3. 从物品的角度出发，推荐系统可以更好地发掘物品的长尾（long tail）。
4. 推荐算法的本质是通过一定的方式将用户和物品联系起来，而不同的推荐系统利用了不同的方式。
5. 推荐系统应用都是由前台的展示页面、后台的日志系统以及推荐算法系统3部分构成的。
6. 针对不同的推荐应用场景，推荐算法有很大的不同。比如音乐、电影、电子商务这三种物品本身的属性差别就非常大。其他的比如广告推荐、位置推荐等，应用场景的不同、需要推荐物品的不同对推荐算法的影响非常大。

### 评测标准

1. 括准确度、覆盖度、新颖度、惊喜度、信任度、透明度等。这**些指标中，有些可以离线计算，有些只有在线才能计算，有些只能通过用户问卷获得**。
2. 主要有3种评测推荐效果的实验方法，即离线实验（offline experiment）、用户调查（user study）和在线实验（online experiment）。
3. 离线实验的缺点：无法计算商业上关心的指标。离线实验的指标和商业指标存在差距。
4. 用户调查的优缺点也很明显。它的优点是可以获得很多体现用户主观感受的指标，相对在线实验风险很低，出现错误后很容易弥补。缺点是**招募测试用户代价较大**，很难组织大规模的测试用户，因此会使测试结果的**统计意义不足**。此外，在很多时候设计双盲实验非常困难，而且**用户在测试环境下的行为和真实环境下的行为可能有所不同**，因而在测试环境下收集的测试指标可能在真实环境下无法重现。
5. 在线实验，一般采用AB测试的方式。
   1. AB测试：通过规则将用户分为几组，对不同的组采用不同的算法，然后对比各个组之间的评价指标。
      1. 优点：以公平获得不同算法实际在线时的性能指标，包括商业上关注的指标。
      2. 缺点：是周期比较长，必须进行长期的实验才能得到可靠的结果。
      3. 适用场景：因此一般不会用AB测试测试所有的算法，而只是用它测试那些在离线实验和用户调查中表现很好的算法。
6. 推荐算法上线的步骤：
   1. 首先，需要通过离线实验证明它在很多离线指标上优于现有的算法。
   2. 然后，需要通过用户调查确定它的用户满意度不低于现有的算法。
   3. 最后，通过在线的AB测试确定它在我们关心的指标上优于现有的算法。
7. 用户满意度。无法通过离线计算时获得。大部分需要通过用户调查或者在线实验的形式获得。
8. 预测准确度。这是最重要的推荐系统**离线**评测指标。
   1. 评分预测：预测用户对物品评分的行为。一般使用均方根误差和平均绝对误差来衡量。就是L1和L2范数。
      1. **Netflix认为RMSE加大了对预测不准的用户物品评分的惩罚（平方项的惩罚）**，因而对系统的评测更加苛刻。研究表明，如果评分系统是基于整数建立的（即用户给的评分都是整数），那么对预测结果取整会降低MAE的误差。
   2. TopN推荐：一般是给用户一个个性化的推荐列表。TopN推荐的预测准确率一般通过准确率（precision）/召回率（recall）度量。令$R(u)$是根据用户在训练集上的行为给用户作出的推荐列表，而$T(u)$是用户在测试集上的行为列表。那么，推荐结果的召回率定义为：
      $$Recall = \frac{\sum \limits_{u\in U}|R(u) \cap T(u)|}{\sum \limits_{u\in U}|T(u)|}$$
      推荐结果的准确率为：
      $$Percision = \frac{\sum \limits_{u\in U}|R(u) \cap T(u)|}{\sum \limits_{u\in U}|R(u)|}$$
   3. 覆盖率coverage：描述一个推荐系统对物品长尾的发掘能力。覆盖率有不同的定义方法，最简单的定义为推荐系统能够推荐出来的物品占总物品集合的比例。假设系统的用户集合为$U$，推荐系统给每个用户推荐一个长度为N的物品列表$R(u)$。那么推荐系统的覆盖率可以通过下面的公式计算：$Coverage = \frac{|U_{u\in U}R(u)|}{I}$。**覆盖率是一个内容提供商会关心的指标**。
